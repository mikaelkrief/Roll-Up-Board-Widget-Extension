<!-- ---------------------------------------------------------------------
// <copyright file="configuration.html">
//    This code is licensed under the MIT License.
//    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF
//    ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED
//    TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A
//    PARTICULAR PURPOSE AND NONINFRINGEMENT.
// </copyright>
// <summary>
// configuration
// </summary>
//---------------------------------------------------------------------
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <link href="css/app.css" rel="stylesheet" />
</head>

<body>
    <div class="container">
        <div class="widget-configuration">
            <div class="dropdown" id="query-path-dropdown">
                <label>Backlog</label>
                <div class="wrapper">
                    <select id="board-dropdown"></select>
                </div>
            </div>
            <div id="ff">
                <legend>Enable preview feature</legend>
                <label class="switch"><input type="checkbox" id="enableff"><div class="slider round"></div></label>
            </div>
        </div>
        <script src="../lib/VSS.SDK.min.js"></script>
        <script src="../lib/ai.0.js"></script>
        <script src="../lib/ldclient.min.js"></script>
        <script type="text/javascript">
            VSS.init({
                explicitNotifyLoaded: true,
                usePlatformStyles: true,
                usePlatformScripts: true,
                setupModuleLoader: true
            });


            VSS.ready(function () {
                VSS.require(["dist/configuration", "TFS/Dashboards/WidgetHelpers", "../dist/LaunchDarklyService"], function (config, WidgetHelpers, ff) {
                    let webContext = VSS.getWebContext();
                    WidgetHelpers.IncludeWidgetConfigurationStyles();
                    var user = {
                        "key": webContext.account.name + ":" + webContext.user.email
                    }
                    var ldclientServices = ff.LaunchDarklyService.Init(user);
                    ldclientServices.ldClient.on("ready", function () {
                        VSS.register("rollupboardwidget-Configuration", () => {
                            ldclientServices.GetAllFlags();
                            let configuration = new config.Configuration(WidgetHelpers,ldclientServices);
                            return configuration;                   
                        });
                         VSS.notifyLoadSucceeded();
                    });
                });
            });
        </script>
</body>

</html>